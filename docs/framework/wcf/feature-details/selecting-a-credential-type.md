---
title: 자격 증명 형식 선택
ms.date: 03/30/2017
ms.assetid: bf707063-3f30-4304-ab53-0e63413728a8
ms.openlocfilehash: 7bcc5f407077b32d85b7f1e5f7ddbc5aba4b80c1
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 06/09/2020
ms.locfileid: "84586197"
---
# <a name="selecting-a-credential-type"></a><span data-ttu-id="5a351-102">자격 증명 형식 선택</span><span class="sxs-lookup"><span data-stu-id="5a351-102">Selecting a Credential Type</span></span>
<span data-ttu-id="5a351-103">*자격 증명* 은 요청 된 id 또는 기능을 설정 하는 데 사용 하는 WCF (데이터 Windows Communication Foundation)입니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-103">*Credentials* are the data Windows Communication Foundation (WCF) uses to establish either a claimed identity or capabilities.</span></span> <span data-ttu-id="5a351-104">예를 들어 여권은 정부에서 국가나 지역의 시민권을 입증하기 위해 발급하는 자격 증명입니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-104">For example, a passport is a credential a government issues to prove citizenship in a country or region.</span></span> <span data-ttu-id="5a351-105">WCF에서 자격 증명은 사용자 이름 토큰 및 x.509 인증서와 같은 많은 형식을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-105">In WCF, credentials can take many forms, such as user name tokens and X.509 certificates.</span></span> <span data-ttu-id="5a351-106">이 항목에서는 자격 증명, WCF에서 자격 증명을 사용 하는 방법 및 응용 프로그램에 적합 한 자격 증명을 선택 하는 방법에 대해 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-106">This topic discusses credentials, how they are used in WCF, and how to select the right credential for your application.</span></span>  
  
 <span data-ttu-id="5a351-107">많은 국가와 지역에서 운전 면허는 자격 증명의 예입니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-107">In many countries and regions, a driver’s license is an example of a credential.</span></span> <span data-ttu-id="5a351-108">라이선스에는 사용자의 신분과 능력을 나타내는 데이터가 들어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-108">A license contains data that represents a person's identity and capabilities.</span></span> <span data-ttu-id="5a351-109">또한 소유자의 사진 형태로 소유 증명이 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-109">It contains proof of possession in the form of the possessor's picture.</span></span> <span data-ttu-id="5a351-110">라이선스는 신뢰할 수 있는 기관(일반적으로 정부 라이선스 부서)에서 발급됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-110">The license is issued by a trusted authority, usually a governmental department of licensing.</span></span> <span data-ttu-id="5a351-111">라이선스에는 날인이 찍히며, 변조 또는 위조되지 않았음을 증명하는 홀로그램이 삽입되어 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-111">The license is sealed, and can contain a hologram, showing that it has not been tampered with or counterfeited.</span></span>  
  
 <span data-ttu-id="5a351-112">자격 증명을 제공할 때는 데이터와 데이터 소유 증명을 모두 제공해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-112">Presenting a credential involves presenting both the data and proof of possession of the data.</span></span> <span data-ttu-id="5a351-113">WCF는 전송 및 메시지 보안 수준에서 다양 한 자격 증명 형식을 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-113">WCF supports a variety of credential types at both the transport and message security levels.</span></span> <span data-ttu-id="5a351-114">예를 들어 WCF: 사용자 이름 및 (x.509) 인증서 자격 증명에서 지원 되는 두 가지 형식의 자격 증명을 고려 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-114">For example, consider two types of credentials supported in WCF: user name and (X.509) certificate credentials.</span></span>  
  
 <span data-ttu-id="5a351-115">사용자 이름 자격 증명에서 사용자 이름은 요구된 ID를 나타내고 암호는 소유 증명을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-115">For the user name credential, the user name represents the claimed identity and the password provides proof of possession.</span></span> <span data-ttu-id="5a351-116">이 경우 신뢰할 수 있는 기관은 사용자 이름과 암호의 유효성을 검사하는 시스템입니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-116">The trusted authority in this case is the system that validates the user name and password.</span></span>  
  
 <span data-ttu-id="5a351-117">X.509 인증서 자격 증명을 사용 하 여 주체 이름, 주체 대체 이름 또는 인증서 내의 특정 필드를 id 클레임으로 사용할 수 있는 반면, 및 필드와 같은 다른 필드는 `Valid From` `Valid To` 인증서의 유효성을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-117">With an X.509 certificate credential, the subject name, subject alternative name or specific fields within the certificate can be used as claims of identity, while other fields, such as the `Valid From` and `Valid To` fields, specify the validity of the certificate.</span></span>  
  
## <a name="transport-credential-types"></a><span data-ttu-id="5a351-118">전송 자격 증명 형식</span><span class="sxs-lookup"><span data-stu-id="5a351-118">Transport Credential Types</span></span>  
 <span data-ttu-id="5a351-119">다음 표에서는 전송 보안 모드의 바인딩에서 사용할 수 있는 클라이언트 자격 증명 형식을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-119">The following table shows the possible types of client credentials that can be used by a binding in transport security mode.</span></span> <span data-ttu-id="5a351-120">서비스를 만드는 경우 `ClientCredentialType` 속성을 이러한 값 중 하나로 설정하여 클라이언트가 서비스와 통신하기 위해 제공해야 하는 자격 증명 형식을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-120">When creating a service, set the `ClientCredentialType` property to one of these values to specify the type of credential that the client must supply to communicate with your service.</span></span> <span data-ttu-id="5a351-121">코드 또는 구성 파일에서 형식을 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-121">You can set the types in either code or configuration files.</span></span>  
  
|<span data-ttu-id="5a351-122">설정</span><span class="sxs-lookup"><span data-stu-id="5a351-122">Setting</span></span>|<span data-ttu-id="5a351-123">Description</span><span class="sxs-lookup"><span data-stu-id="5a351-123">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="5a351-124">None</span><span class="sxs-lookup"><span data-stu-id="5a351-124">None</span></span>|<span data-ttu-id="5a351-125">클라이언트가 자격 증명을 제공할 필요가 없음을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-125">Specifies that the client does not need to present any credential.</span></span> <span data-ttu-id="5a351-126">익명 클라이언트로 변환됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-126">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="5a351-127">Basic</span><span class="sxs-lookup"><span data-stu-id="5a351-127">Basic</span></span>|<span data-ttu-id="5a351-128">클라이언트에 대한 기본 인증을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-128">Specifies basic authentication for the client.</span></span> <span data-ttu-id="5a351-129">자세한 내용은 RFC2617-[HTTP authentication: Basic And Digest authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="5a351-129">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span></span>|  
|<span data-ttu-id="5a351-130">다이제스트</span><span class="sxs-lookup"><span data-stu-id="5a351-130">Digest</span></span>|<span data-ttu-id="5a351-131">클라이언트에 대한 다이제스트 인증을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-131">Specifies digest authentication for the client.</span></span> <span data-ttu-id="5a351-132">자세한 내용은 RFC2617-[HTTP authentication: Basic And Digest authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="5a351-132">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span></span>|  
|<span data-ttu-id="5a351-133">Ntlm</span><span class="sxs-lookup"><span data-stu-id="5a351-133">Ntlm</span></span>|<span data-ttu-id="5a351-134">NTLM(NT LAN Manager) 인증을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-134">Specifies NT LAN Manager (NTLM) authentication.</span></span> <span data-ttu-id="5a351-135">이 인증은 어떤 이유로 Kerberos 인증을 사용할 수 없는 경우에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-135">This is used when you cannot use Kerberos authentication for some reason.</span></span> <span data-ttu-id="5a351-136">속성을로 설정 하 여이를 대체 방법으로 사용 하지 않도록 설정할 수도 있습니다 <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> `false` . 이렇게 하면 NTLM이 사용 되는 경우 WCF에서 예외를 throw 하는 데 가장 적합 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-136">You can also disable its use as a fallback by setting the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false`, which causes WCF to make a best-effort to throw an exception if NTLM is used.</span></span> <span data-ttu-id="5a351-137">이 속성을 `false`로 설정하면 유선을 통해 NTLM 자격 증명을 보낼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-137">Note that setting this property to `false` may not prevent NTLM credentials from being sent over the wire.</span></span>|  
|<span data-ttu-id="5a351-138">Windows</span><span class="sxs-lookup"><span data-stu-id="5a351-138">Windows</span></span>|<span data-ttu-id="5a351-139">Windows 인증을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-139">Specifies Windows authentication.</span></span> <span data-ttu-id="5a351-140">Windows 도메인에서 Kerberos 프로토콜만 지정하려면 <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> 속성을 `false`로 설정합니다. 기본값은 `true`입니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-140">To specify only the Kerberos protocol on a Windows domain, set the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false` (the default is `true`).</span></span>|  
|<span data-ttu-id="5a351-141">인증서</span><span class="sxs-lookup"><span data-stu-id="5a351-141">Certificate</span></span>|<span data-ttu-id="5a351-142">X.509 인증서를 사용하여 클라이언트 인증을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-142">Performs client authentication using an X.509 certificate.</span></span>|  
|<span data-ttu-id="5a351-143">암호</span><span class="sxs-lookup"><span data-stu-id="5a351-143">Password</span></span>|<span data-ttu-id="5a351-144">사용자가 사용자 이름과 암호를 제공해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-144">User must supply a user name and password.</span></span> <span data-ttu-id="5a351-145">Windows 인증 또는 다른 사용자 지정 솔루션을 사용하여 사용자 이름/암호 쌍의 유효성을 검사합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-145">Validate the user name/password pair using Windows authentication or another custom solution.</span></span>|  
  
### <a name="message-client-credential-types"></a><span data-ttu-id="5a351-146">메시지 클라이언트 자격 증명 형식</span><span class="sxs-lookup"><span data-stu-id="5a351-146">Message Client Credential Types</span></span>  
 <span data-ttu-id="5a351-147">다음 표에서는 메시지 보안을 사용하는 애플리케이션을 만들 때 사용할 수 있는 자격 증명 형식을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-147">The following table shows the possible credential types that you can use when creating an application that uses message security.</span></span> <span data-ttu-id="5a351-148">코드 또는 구성 파일에서 이러한 값을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-148">You can use these values in either code or configuration files.</span></span>  
  
|<span data-ttu-id="5a351-149">설정</span><span class="sxs-lookup"><span data-stu-id="5a351-149">Setting</span></span>|<span data-ttu-id="5a351-150">Description</span><span class="sxs-lookup"><span data-stu-id="5a351-150">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="5a351-151">None</span><span class="sxs-lookup"><span data-stu-id="5a351-151">None</span></span>|<span data-ttu-id="5a351-152">클라이언트가 자격 증명을 제공할 필요가 없음을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-152">Specifies that the client does not need to present a credential.</span></span> <span data-ttu-id="5a351-153">익명 클라이언트로 변환됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-153">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="5a351-154">Windows</span><span class="sxs-lookup"><span data-stu-id="5a351-154">Windows</span></span>|<span data-ttu-id="5a351-155">Windows 자격 증명으로 설정된 보안 컨텍스트에서 SOAP 메시지 교환을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-155">Allows SOAP message exchanges to occur under the security context established with a Windows credential.</span></span>|  
|<span data-ttu-id="5a351-156">사용자 이름</span><span class="sxs-lookup"><span data-stu-id="5a351-156">Username</span></span>|<span data-ttu-id="5a351-157">서비스에서 사용자 이름 자격 증명을 사용하여 클라이언트를 인증하도록 요구할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-157">Allows the service to require that the client be authenticated with a user name credential.</span></span> <span data-ttu-id="5a351-158">WCF에서는 서명 생성 또는 데이터 암호화와 같은 사용자 이름을 가진 암호화 작업을 허용 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-158">Note that WCF does not allow any cryptographic operations with user names, such as generating a signature or encrypting data.</span></span> <span data-ttu-id="5a351-159">WCF는 사용자 이름 자격 증명을 사용할 때 전송 보안이 유지 되도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-159">WCF ensures that the transport is secured when using user name credentials.</span></span>|  
|<span data-ttu-id="5a351-160">인증서</span><span class="sxs-lookup"><span data-stu-id="5a351-160">Certificate</span></span>|<span data-ttu-id="5a351-161">서비스에서 X.509 인증서를 사용하여 클라이언트를 인증하도록 요구할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-161">Allows the service to require that the client be authenticated using an X.509 certificate.</span></span>|  
|<span data-ttu-id="5a351-162">Issued Token</span><span class="sxs-lookup"><span data-stu-id="5a351-162">Issued Token</span></span>|<span data-ttu-id="5a351-163">보안 정책에 따라 구성된 사용자 지정 토큰 형식입니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-163">A custom token type configured according to a security policy.</span></span> <span data-ttu-id="5a351-164">기본 토큰 형식은 SAML(Security Assertions Markup Language)입니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-164">The default token type is Security Assertions Markup Language (SAML).</span></span> <span data-ttu-id="5a351-165">토큰은 보안 토큰 서비스에 의해 발급됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-165">The token is issued by a secure token service.</span></span> <span data-ttu-id="5a351-166">자세한 내용은 [페더레이션 및 발급 된 토큰](federation-and-issued-tokens.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="5a351-166">For more information, see [Federation and Issued Tokens](federation-and-issued-tokens.md).</span></span>|  
  
### <a name="negotiation-model-of-service-credentials"></a><span data-ttu-id="5a351-167">서비스 자격 증명의 협상 모델</span><span class="sxs-lookup"><span data-stu-id="5a351-167">Negotiation Model of Service Credentials</span></span>  
 <span data-ttu-id="5a351-168">*협상* 은 자격 증명을 교환 하 여 클라이언트와 서비스 간에 트러스트를 설정 하는 프로세스입니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-168">*Negotiation* is the process of establishing trust between a client and a service by exchanging credentials.</span></span> <span data-ttu-id="5a351-169">이 프로세스는 협상 프로세스의 다음 단계에 필요한 정보만 공개하도록 클라이언트와 서비스 간에 반복적으로 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-169">The process is performed iteratively between the client and the service, so as to disclose only the information necessary for the next step in the negotiation process.</span></span> <span data-ttu-id="5a351-170">실제로 최종 결과는 후속 작업에 사용할 서비스의 자격 증명이 클라이언트에 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-170">In practice, the end result is the delivery of a service's credential to the client to be used in subsequent operations.</span></span>  
  
 <span data-ttu-id="5a351-171">한 가지 예외를 제외 하 고 기본적으로 WCF의 시스템 제공 바인딩은 메시지 수준 보안을 사용 하는 경우 서비스 자격 증명을 자동으로 협상 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-171">With one exception, by default the system-provided bindings in WCF negotiate the service credential automatically when using message-level security.</span></span> <span data-ttu-id="5a351-172">예외는 <xref:System.ServiceModel.BasicHttpBinding> 기본적으로 보안을 사용 하지 않는입니다. 이 동작을 사용 하지 않도록 설정 하려면 <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> 및 속성을 참조 <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> 하세요.</span><span class="sxs-lookup"><span data-stu-id="5a351-172">(The exception is the <xref:System.ServiceModel.BasicHttpBinding>, which does not enable security by default.) To disable this behavior, see the <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> and <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> properties.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="5a351-173">.NET Framework 3.5 이상에서 SSL 보안을 사용 하는 경우 WCF 클라이언트는 인증서 저장소의 중간 인증서와 SSL 협상 중에 받은 중간 인증서를 모두 사용 하 여 서비스의 인증서에서 인증서 체인 유효성 검사를 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-173">When SSL security is used with .NET Framework 3.5 and later, a WCF client uses both the intermediate certificates in its certificate store and the intermediate certificates received during SSL negotiation to perform certificate chain validation on the service's certificate.</span></span> <span data-ttu-id="5a351-174">.NET Framework 3.0은 로컬 인증서 저장소에 설치된 중간 인증서만 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-174">.NET Framework 3.0 only uses the intermediate certificates installed in the local certificate store.</span></span>  
  
#### <a name="out-of-band-negotiation"></a><span data-ttu-id="5a351-175">Out-of-Band 협상</span><span class="sxs-lookup"><span data-stu-id="5a351-175">Out-of-Band Negotiation</span></span>  
 <span data-ttu-id="5a351-176">자동 협상을 사용하지 않는 경우 메시지를 서비스로 보내기 전에 클라이언트에서 서비스 자격 증명을 구축해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-176">If automatic negotiation is disabled, the service credential must be provisioned at the client prior to sending any messages to the service.</span></span> <span data-ttu-id="5a351-177">이를 *대역 외* 프로 비전이 라고도 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-177">This is also known as an *out-of-band* provisioning.</span></span> <span data-ttu-id="5a351-178">예를 들어 지정한 자격 증명 형식이 인증서이고 자동 협상을 사용할 수 없는 경우 클라이언트는 서비스 소유자에 연결하여 인증서를 받고 클라이언트 애플리케이션을 실행하는 컴퓨터에 설치해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-178">For example, if the specified credential type is a certificate, and automatic negotiation is disabled, the client must contact the service owner to receive and install the certificate on the computer running the client application.</span></span> <span data-ttu-id="5a351-179">이 작업은 예를 들어 B2B 시나리오에서 서비스에 액세스할 수 있는 클라이언트를 엄격하게 제어하려는 경우에 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-179">This can be done, for example, when you want to strictly control which clients can access a service in a business-to-business scenario.</span></span> <span data-ttu-id="5a351-180">이러한 대역 외 협상은 전자 메일에서 수행할 수 있으며, x.509 인증서는 Microsoft Management Console (MMC) 인증서 스냅인과 같은 도구를 사용 하 여 Windows 인증서 저장소에 저장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-180">This out-of-band-negotiation can be done in email, and the X.509 certificate is stored in Windows certificate store, using a tool such as the Microsoft Management Console (MMC) Certificates snap-in.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="5a351-181"><xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> 속성은 out-of-band 협상을 통해 얻은 인증서를 서비스에 제공하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-181">The <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property is used to provide the service with a certificate that was attained through out-of-band negotiation.</span></span> <span data-ttu-id="5a351-182">이 속성은 바인딩에서 자동 협상을 허용하지 않으므로 <xref:System.ServiceModel.BasicHttpBinding> 클래스를 사용할 때 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-182">This is necessary when using the <xref:System.ServiceModel.BasicHttpBinding> class because the binding does not allow automated negotiation.</span></span> <span data-ttu-id="5a351-183">이 속성은 상관 관계가 없는 이중 시나리오에서도 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-183">The property is also used in an uncorrelated duplex scenario.</span></span> <span data-ttu-id="5a351-184">이 시나리오에서는 클라이언트가 먼저 서버로 요청을 보내지 않고도 서버가 클라이언트에게 메시지를 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-184">This is a scenario where a server sends a message to the client without requiring the client to send a request to the server first.</span></span> <span data-ttu-id="5a351-185">서버는 클라이언트로부터 받은 요청이 없으므로 클라이언트 인증서를 사용하여 클라이언트에 대한 메시지를 암호화해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-185">Because the server does not have a request from the client, it must use the client's certificate to encrypt the message to the client.</span></span>  
  
## <a name="setting-credential-values"></a><span data-ttu-id="5a351-186">자격 증명 값 설정</span><span class="sxs-lookup"><span data-stu-id="5a351-186">Setting Credential Values</span></span>  
 <span data-ttu-id="5a351-187">보안 모드를 선택한 후에는 실제 자격 증명을 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-187">Once you select a security mode, you must specify the actual credentials.</span></span> <span data-ttu-id="5a351-188">예를 들어 자격 증명 형식이 "인증서"로 설정된 경우 특정 X.509 인증서 같은 특정 자격 증명을 서비스 또는 클라이언트와 연결해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-188">For example, if the credential type is set to "certificate," then you must associate a specific credential (such as a specific X.509 certificate) with the service or client.</span></span>  
  
 <span data-ttu-id="5a351-189">서비스 또는 클라이언트를 프로그래밍할지에 따라 자격 증명 값을 설정하는 방법이 약간씩 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-189">Depending on whether you are programming a service or a client, the method for setting the credential value differs slightly.</span></span>  
  
### <a name="setting-service-credentials"></a><span data-ttu-id="5a351-190">서비스 자격 증명 설정</span><span class="sxs-lookup"><span data-stu-id="5a351-190">Setting Service Credentials</span></span>  
 <span data-ttu-id="5a351-191">전송 모드를 사용하고 HTTP를 전송으로 사용하는 경우에는 IIS(인터넷 정보 서비스)를 사용하거나 인증서로 포트를 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-191">If you are using transport mode, and you are using HTTP as the transport, you must use either Internet Information Services (IIS) or configure the port with a certificate.</span></span> <span data-ttu-id="5a351-192">자세한 내용은 [전송 보안 개요](transport-security-overview.md) 및 [HTTP 전송 보안](http-transport-security.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="5a351-192">For more information, see [Transport Security Overview](transport-security-overview.md) and [HTTP Transport Security](http-transport-security.md).</span></span>  
  
 <span data-ttu-id="5a351-193">코드에서 자격 증명으로 서비스를 구축하려면 <xref:System.ServiceModel.ServiceHost> 클래스의 인스턴스를 만들고 <xref:System.ServiceModel.Description.ServiceCredentials> 속성을 통해 액세스하는 <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> 클래스를 사용하여 적절한 자격 증명을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-193">To provision a service with credentials in code, create an instance of the <xref:System.ServiceModel.ServiceHost> class and specify the appropriate credential using the <xref:System.ServiceModel.Description.ServiceCredentials> class, accessed through the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> property.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="5a351-194">인증서 설정</span><span class="sxs-lookup"><span data-stu-id="5a351-194">Setting a Certificate</span></span>  
 <span data-ttu-id="5a351-195">서비스를 클라이언트에 인증하는 데 사용할 X.509 인증서로 서비스를 구축하려면 <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A> 클래스의 <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential> 메서드를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-195">To provision a service with an X.509 certificate to be used to authenticate the service to clients, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential> class.</span></span>  
  
 <span data-ttu-id="5a351-196">클라이언트 인증서로 서비스를 구축하려면 <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> 클래스의 <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential> 메서드를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-196">To provision a service with a client certificate, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential> class.</span></span>  
  
#### <a name="setting-windows-credentials"></a><span data-ttu-id="5a351-197">Windows 자격 증명 설정</span><span class="sxs-lookup"><span data-stu-id="5a351-197">Setting Windows Credentials</span></span>  
 <span data-ttu-id="5a351-198">클라이언트가 올바른 사용자 이름과 암호를 지정하면 해당 자격 증명이 클라이언트 인증에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-198">If the client specifies a valid user name and password, that credential is used to authenticate the client.</span></span> <span data-ttu-id="5a351-199">그렇지 않으면 현재 로그온한 사용자의 자격 증명이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-199">Otherwise, the current logged-on user's credentials are used.</span></span>  
  
### <a name="setting-client-credentials"></a><span data-ttu-id="5a351-200">클라이언트 자격 증명 설정</span><span class="sxs-lookup"><span data-stu-id="5a351-200">Setting Client Credentials</span></span>  
 <span data-ttu-id="5a351-201">WCF에서 클라이언트 응용 프로그램은 WCF 클라이언트를 사용 하 여 서비스에 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-201">In WCF, client applications use a WCF client to connect to services.</span></span> <span data-ttu-id="5a351-202">모든 클라이언트는 <xref:System.ServiceModel.ClientBase%601> 클래스에서 파생되고, 클라이언트의 <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> 속성은 클라이언트 자격 증명의 다양한 값을 지정하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-202">Every client derives from the <xref:System.ServiceModel.ClientBase%601> class, and the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property on the client allows the specification of various values of client credentials.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="5a351-203">인증서 설정</span><span class="sxs-lookup"><span data-stu-id="5a351-203">Setting a Certificate</span></span>  
 <span data-ttu-id="5a351-204">클라이언트를 서비스에 인증하는 데 사용되는 X.509 인증서로 서비스를 구축하려면 <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> 클래스의 <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential> 메서드를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-204">To provision a service with an X.509 certificate that is used to authenticate the client to a service, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential> class.</span></span>  
  
## <a name="how-client-credentials-are-used-to-authenticate-a-client-to-the-service"></a><span data-ttu-id="5a351-205">클라이언트 자격 증명을 사용하여 클라이언트를 서비스에 인증하는 방법</span><span class="sxs-lookup"><span data-stu-id="5a351-205">How Client Credentials Are Used to Authenticate a Client to the Service</span></span>  
 <span data-ttu-id="5a351-206">서비스와 통신하는 데 필요한 클라이언트 자격 증명 정보는 <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> 속성이나 <xref:System.ServiceModel.ChannelFactory.Credentials%2A> 속성을 사용하여 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-206">Client credential information required to communicate with a service is provided using either the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property or the <xref:System.ServiceModel.ChannelFactory.Credentials%2A> property.</span></span> <span data-ttu-id="5a351-207">보안 채널은 이 정보를 사용하여 클라이언트를 서비스에 인증합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-207">The security channel uses this information to authenticate the client to the service.</span></span> <span data-ttu-id="5a351-208">인증은 다음 두 가지 모드 중 하나를 통해 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-208">Authentication is accomplished through one of two modes:</span></span>  
  
- <span data-ttu-id="5a351-209">클라이언트 자격 증명은 WCF 클라이언트 인스턴스를 사용 하 여 보안 컨텍스트를 설정 하는 첫 번째 메시지를 전송 하기 전에 한 번 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-209">The client credentials are used once before the first message is sent, using the WCF client instance to establish a security context.</span></span> <span data-ttu-id="5a351-210">그런 다음 모든 애플리케이션 메시지는 보안 컨텍스트를 통해 보안이 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-210">All application messages are then secured through the security context.</span></span>  
  
- <span data-ttu-id="5a351-211">서비스로 전송되는 모든 애플리케이션 메시지를 인증하는 데 클라이언트 자격 증명이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-211">The client credentials are used to authenticate every application message sent to the service.</span></span> <span data-ttu-id="5a351-212">이 경우에는 클라이언트와 서비스 간에 컨텍스트가 설정되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-212">In this case, no context is established between the client and the service.</span></span>  
  
### <a name="established-identities-cannot-be-changed"></a><span data-ttu-id="5a351-213">설정된 ID를 변경할 수 없음</span><span class="sxs-lookup"><span data-stu-id="5a351-213">Established Identities Cannot Be Changed</span></span>  
 <span data-ttu-id="5a351-214">첫 번째 방법을 사용하면 설정된 컨텍스트가 영구적으로 클라이언트 ID와 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-214">When the first method is used, the established context is permanently associated with the client identity.</span></span> <span data-ttu-id="5a351-215">즉, 보안 컨텍스트가 설정되고 나면 클라이언트와 연결된 ID를 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-215">That is, once the security context has been established, the identity associated with the client cannot be changed.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="5a351-216">ID를 전환할 수 없을 때(보안 컨텍스트 설정이 켜진 경우의 기본 동작) 주의해야 할 경우가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-216">There is a situation to be aware of when the identity cannot be switched (that is, when establish security context is on, the default behavior).</span></span> <span data-ttu-id="5a351-217">두 번째 서비스와 통신 하는 서비스를 만드는 경우 WCF 클라이언트를 두 번째 서비스에 여는 데 사용 된 id를 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-217">If you create a service that communicates with a second service, the identity used to open the WCF client to the second service cannot be changed.</span></span> <span data-ttu-id="5a351-218">여러 클라이언트가 첫 번째 서비스를 사용할 수 있고 두 번째 서비스에 액세스할 때 서비스가 클라이언트를 가장하는 경우 이것이 문제가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-218">This becomes a problem if multiple clients are allowed to use the first service and the service impersonates the clients when accessing the second service.</span></span> <span data-ttu-id="5a351-219">서비스가 모든 호출자에 대해 동일한 클라이언트를 다시 사용하는 경우 두 번째 서비스에 대한 모든 호출은 클라이언트를 두 번째 서비스에 여는 데 사용된 첫 번째 호출자의 ID로 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-219">If the service reuses the same client for all callers, all calls to the second service are done under the identity of the first caller that was used to open the client to the second service.</span></span> <span data-ttu-id="5a351-220">즉, 서비스는 모든 클라이언트에 대해 첫 번째 클라이언트의 ID를 사용하여 두 번째 서비스와 통신합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-220">In other words, the service uses the identity of the first client for all its clients to communicate with the second service.</span></span> <span data-ttu-id="5a351-221">이 경우 권한 상승이 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-221">This can lead to the elevation of privilege.</span></span> <span data-ttu-id="5a351-222">원하는 서비스 동작이 아닌 경우 각 호출자를 추적하여 각 호출자와 관련해서 두 번째 서비스에 대해 새 클라이언트를 만들고 서비스가 올바른 호출자에 대해 올바른 클라이언트만 사용하여 두 번째 서비스와 통신하도록 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a351-222">If this is not the desired behavior of your service, you must track each caller and create a new client to the second service for every distinct caller, and ensure that the service uses only the right client for the right caller to communicate with the second service.</span></span>  
  
 <span data-ttu-id="5a351-223">자격 증명 및 보안 세션에 대 한 자세한 내용은 보안 [세션의 보안 고려 사항](security-considerations-for-secure-sessions.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="5a351-223">For more information about credentials and secure sessions, see [Security Considerations for Secure Sessions](security-considerations-for-secure-sessions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5a351-224">참고 항목</span><span class="sxs-lookup"><span data-stu-id="5a351-224">See also</span></span>

- <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType>
- <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Description.ClientCredentials.ClientCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.BasicHttpMessageSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.HttpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverMsmq.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverTcp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.TcpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A?displayProperty=nameWithType>
- [<span data-ttu-id="5a351-225">보안 개념</span><span class="sxs-lookup"><span data-stu-id="5a351-225">Security Concepts</span></span>](security-concepts.md)
- [<span data-ttu-id="5a351-226">서비스 및 클라이언트에 보안 설정</span><span class="sxs-lookup"><span data-stu-id="5a351-226">Securing Services and Clients</span></span>](securing-services-and-clients.md)
- [<span data-ttu-id="5a351-227">WCF 보안 프로그래밍</span><span class="sxs-lookup"><span data-stu-id="5a351-227">Programming WCF Security</span></span>](programming-wcf-security.md)
- [<span data-ttu-id="5a351-228">HTTP 전송 보안</span><span class="sxs-lookup"><span data-stu-id="5a351-228">HTTP Transport Security</span></span>](http-transport-security.md)
