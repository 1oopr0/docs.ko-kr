---
title: 연결 정보 보호
description: 연결 문자열을 구성 하 고 유지 하는 방법 및 인증 유형 때문에 발생할 수 있는 연결 문자열의 보안 취약성에 대해 알아봅니다.
ms.date: 03/30/2017
ms.assetid: 1471f580-bcd4-4046-bdaf-d2541ecda2f4
ms.openlocfilehash: 76b182a3d14be08d956f8ffb95dd2ae05245c003
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 09/15/2020
ms.locfileid: "90557894"
---
# <a name="protecting-connection-information"></a><span data-ttu-id="39acb-103">연결 정보 보호</span><span class="sxs-lookup"><span data-stu-id="39acb-103">Protecting Connection Information</span></span>
<span data-ttu-id="39acb-104">애플리케이션 보안의 가장 중요한 목표 중 하나는 데이터 소스에 대한 액세스를 보호하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-104">Protecting access to your data source is one of the most important goals when securing an application.</span></span> <span data-ttu-id="39acb-105">연결 문자열을 안전하게 보호하지 않으면 이로 인해 보안상 취약한 부분이 생길 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-105">A connection string presents a potential vulnerability if it is not secured.</span></span> <span data-ttu-id="39acb-106">연결 정보를 일반 텍스트로 저장하거나 메모리에 유지하면 전체 시스템을 손상시킬 위험이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-106">Storing connection information in plain text or persisting it in memory risks compromising your entire system.</span></span> <span data-ttu-id="39acb-107">소스 코드에 포함 된 연결 문자열은 컴파일된 어셈블리에서 MSIL (Microsoft 중간 언어)을 보기 위해 [Ildasm.exe (IL 디스어셈블러)](../../tools/ildasm-exe-il-disassembler.md) 를 사용 하 여 읽을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-107">Connection strings embedded in your source code can be read using the [Ildasm.exe (IL Disassembler)](../../tools/ildasm-exe-il-disassembler.md) to view Microsoft intermediate language (MSIL) in a compiled assembly.</span></span>  
  
 <span data-ttu-id="39acb-108">연결 문자열과 관련된 보안 취약성은 사용된 인증 유형, 연결 문자열을 메모리와 디스크에 유지하는 방법 및 런타임에 연결 문자열을 구성하는 기술에 따라 발생됩니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-108">Security vulnerabilities involving connection strings can arise based on the type of authentication used, how connection strings are persisted in memory and on disk, and the techniques used to construct them at run time.</span></span>  
  
## <a name="use-windows-authentication"></a><span data-ttu-id="39acb-109">Windows 인증 사용</span><span class="sxs-lookup"><span data-stu-id="39acb-109">Use Windows Authentication</span></span>  
 <span data-ttu-id="39acb-110">데이터 소스에 대한 액세스를 제한하려면 사용자 ID, 암호, 데이터 소스 이름과 같은 연결 정보의 보안을 유지해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-110">To help limit access to your data source, you must secure connection information such as user ID, password, and data source name.</span></span> <span data-ttu-id="39acb-111">사용자 정보를 노출 하지 않으려면 가능 하면 Windows 인증 ( *통합 보안*이 라고도 함)을 사용 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-111">In order to avoid exposing user information, we recommend using Windows authentication (sometimes referred to as *integrated security*) wherever possible.</span></span> <span data-ttu-id="39acb-112">Windows 인증은 `Integrated Security` 또는 `Trusted_Connection` 키워드를 사용하여 문자열에 지정되므로 사용자 ID와 암호를 사용할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-112">Windows authentication is specified in a connection string by using the `Integrated Security` or `Trusted_Connection` keywords, eliminating the need to use a user ID and password.</span></span> <span data-ttu-id="39acb-113">Windows 인증을 사용하면 사용자는 Windows에서 인증되고 서버 및 데이터베이스 리소스에 대한 액세스는 Windows 사용자 및 그룹에 부여하는 권한에 따라 결정됩니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-113">When using Windows authentication, users are authenticated by Windows, and access to server and database resources is determined by granting permissions to Windows users and groups.</span></span>  
  
 <span data-ttu-id="39acb-114">Windows 인증을 사용할 수 없는 상황에서는 사용자 자격 증명이 연결 문자열에 노출되므로 각별히 유의해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-114">For situations where it is not possible to use Windows authentication, you must use extra care because user credentials are exposed in the connection string.</span></span> <span data-ttu-id="39acb-115">ASP.NET 애플리케이션에서 Windows 계정을 고정 ID로 구성하여 데이터베이스 및 기타 네트워크 리소스에 연결하는 데 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-115">In an ASP.NET application, you can configure a Windows account as a fixed identity that is used to connect to databases and other network resources.</span></span> <span data-ttu-id="39acb-116">**web.config** 파일의 identity 요소에서 가장을 사용 하도록 설정 하 고 사용자 이름과 암호를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-116">You enable impersonation in the identity element in the **web.config** file and specify a user name and password.</span></span>  
  
```xml  
<identity impersonate="true"
        userName="MyDomain\UserAccount"
        password="*****" />  
```  
  
 <span data-ttu-id="39acb-117">고정 ID 계정은 데이터베이스에서 필수 권한만 부여된 권한이 낮은 계정이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-117">The fixed identity account should be a low-privilege account that has been granted only necessary permissions in the database.</span></span> <span data-ttu-id="39acb-118">또한 사용자 이름과 암호가 일반 텍스트로 노출되지 않도록 구성 파일을 암호화해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-118">In addition, you should encrypt the configuration file so that the user name and password are not exposed in clear text.</span></span>  
  
## <a name="do-not-use-universal-data-link-udl-files"></a><span data-ttu-id="39acb-119">UDL(유니버설 데이터 링크) 파일 사용 안 함</span><span class="sxs-lookup"><span data-stu-id="39acb-119">Do Not Use Universal Data Link (UDL) files</span></span>  
 <span data-ttu-id="39acb-120">UDL(유니버설 데이터 링크) 파일에 <xref:System.Data.OleDb.OleDbConnection>에 대한 연결 문자열을 저장하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="39acb-120">Avoid storing connection strings for an <xref:System.Data.OleDb.OleDbConnection> in a Universal Data Link (UDL) file.</span></span> <span data-ttu-id="39acb-121">UDL은 일반 텍스트로 저장되므로 암호화될 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-121">UDLs are stored in clear text and cannot be encrypted.</span></span> <span data-ttu-id="39acb-122">UDL 파일은 애플리케이션에 대한 외부 파일 기반 리소스이므로 .NET Framework를 사용하여 파일을 보호하거나 암호화할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-122">A UDL file is an external file-based resource to your application, and it cannot be secured or encrypted using the .NET Framework.</span></span>  
  
## <a name="avoid-injection-attacks-with-connection-string-builders"></a><span data-ttu-id="39acb-123">연결 문자열 작성기를 통해 삽입 공격 방지</span><span class="sxs-lookup"><span data-stu-id="39acb-123">Avoid Injection Attacks with Connection String Builders</span></span>  
 <span data-ttu-id="39acb-124">연결 문자열 삽입 공격은 사용자 입력에 대해 동적 문자열 연결을 사용하여 연결 문자열을 작성할 때 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-124">A connection string injection attack can occur when dynamic string concatenation is used to build connection strings based on user input.</span></span> <span data-ttu-id="39acb-125">사용자 입력의 유효성이 확인되지 않고 악의적인 텍스트 또는 문자를 막을 수 없는 경우 공격자가 서버에서 중요한 데이터 또는 기타 리소스에 액세스할 가능성이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-125">If the user input is not validated and malicious text or characters not escaped, an attacker can potentially access sensitive data or other resources on the server.</span></span> <span data-ttu-id="39acb-126">이 문제를 해결하기 위해 ADO.NET 2.0에서는 새 연결 문자열 작성기 클래스를 도입하여 연결 문자열 구문의 유효성을 확인하고 추가 매개 변수가 사용되지 않았는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-126">To address this problem, ADO.NET 2.0 introduced new connection string builder classes to validate connection string syntax and ensure that additional parameters are not introduced.</span></span> <span data-ttu-id="39acb-127">자세한 내용은 [연결 문자열 작성기](connection-string-builders.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="39acb-127">For more information, see [Connection String Builders](connection-string-builders.md).</span></span>  
  
## <a name="use-persist-security-infofalse"></a><span data-ttu-id="39acb-128">Persist Security Info=False 사용</span><span class="sxs-lookup"><span data-stu-id="39acb-128">Use Persist Security Info=False</span></span>  
 <span data-ttu-id="39acb-129">`Persist Security Info`의 기본값은 false입니다. 모든 연결 문자열에서 이 기본값을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-129">The default value for `Persist Security Info` is false; we recommend using this default in all connection strings.</span></span> <span data-ttu-id="39acb-130">`Persist Security Info`를 `true` 또는 `yes`로 설정하면 연결이 열린 다음 연결에서 사용자 ID 및 암호와 같은 보안 관련 정보를 얻을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-130">Setting `Persist Security Info` to `true` or `yes` allows security-sensitive information, including the user ID and password, to be obtained from a connection after it has been opened.</span></span> <span data-ttu-id="39acb-131">`Persist Security Info`를 `false` 또는 `no`로 설정하면 연결을 열기 위해 보안 정보를 사용한 다음 삭제하므로 신뢰할 수 없는 소스는 보안 관련 정보에 액세스할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-131">When `Persist Security Info` is set to `false` or `no`, security information is discarded after it is used to open the connection, ensuring that an untrusted source does not have access to security-sensitive information.</span></span>  
  
## <a name="encrypt-configuration-files"></a><span data-ttu-id="39acb-132">구성 파일 암호화</span><span class="sxs-lookup"><span data-stu-id="39acb-132">Encrypt Configuration Files</span></span>  
 <span data-ttu-id="39acb-133">연결 문자열을 구성 파일에 저장할 수도 있으며 그러면 연결 문자열을 애플리케이션 코드에 포함할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-133">You can also store connection strings in configuration files, which eliminates the need to embed them in your application's code.</span></span> <span data-ttu-id="39acb-134">구성 파일은 .NET Framework에 공통 요소 집합이 정의된 표준 XML 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-134">Configuration files are standard XML files for which the .NET Framework has defined a common set of elements.</span></span> <span data-ttu-id="39acb-135">구성 파일의 연결 문자열은 일반적으로 **\<connectionStrings>** Windows 응용 프로그램에 대 한 **app.config** 의 요소 내부나 ASP.NET 응용 프로그램에 대 한 **web.config** 파일에 저장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="39acb-135">Connection strings in configuration files are typically stored inside the **\<connectionStrings>** element in the **app.config** for a Windows application, or the **web.config** file for an ASP.NET application.</span></span> <span data-ttu-id="39acb-136">구성 파일에서 연결 문자열을 저장, 검색 및 암호화 하는 기본적인 방법에 대 한 자세한 내용은 [연결 문자열 및 구성 파일](connection-strings-and-configuration-files.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="39acb-136">For more information on the basics of storing, retrieving and encrypting connection strings from configuration files, see [Connection Strings and Configuration Files](connection-strings-and-configuration-files.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="39acb-137">참조</span><span class="sxs-lookup"><span data-stu-id="39acb-137">See also</span></span>

- [<span data-ttu-id="39acb-138">ADO.NET 애플리케이션 보안</span><span class="sxs-lookup"><span data-stu-id="39acb-138">Securing ADO.NET Applications</span></span>](securing-ado-net-applications.md)
- <span data-ttu-id="39acb-139">[보호 된 구성을 사용 하 여 구성 정보 암호화](/previous-versions/aspnet/53tyfkaw(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="39acb-139">[Encrypting Configuration Information Using Protected Configuration](/previous-versions/aspnet/53tyfkaw(v=vs.100))</span></span>
- [<span data-ttu-id="39acb-140">.NET의 보안</span><span class="sxs-lookup"><span data-stu-id="39acb-140">Security in .NET</span></span>](../../../standard/security/index.md)
- [<span data-ttu-id="39acb-141">ADO.NET 개요</span><span class="sxs-lookup"><span data-stu-id="39acb-141">ADO.NET Overview</span></span>](ado-net-overview.md)
