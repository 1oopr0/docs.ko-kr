---
title: WCF 개발자를 위한 부록 gRPC
description: 최신 마이크로 서비스 아키텍처에서 분산 트랜잭션 및 해당 구현에 대해 설명 합니다.
ms.date: 09/02/2019
ms.openlocfilehash: f60899463a13e9f740f6ae63150d18eab3069124
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 09/24/2020
ms.locfileid: "91165860"
---
# <a name="appendix-a---transactions"></a><span data-ttu-id="c0ebd-103">부록 A-트랜잭션</span><span class="sxs-lookup"><span data-stu-id="c0ebd-103">Appendix A - Transactions</span></span>

<span data-ttu-id="c0ebd-104">WCF (Windows Communication Foundation)는 분산 트랜잭션을 지원 하므로 여러 서비스에서 원자성 작업을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-104">Windows Communication Foundation (WCF) supports distributed transactions, allowing you to perform atomic operations across multiple services.</span></span> <span data-ttu-id="c0ebd-105">이 기능은 [Microsoft DTC(Distributed Transaction Coordinator)](/previous-versions/windows/desktop/ms684146(v=vs.85))를 기반으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-105">This functionality is based on the [Microsoft Distributed Transaction Coordinator](/previous-versions/windows/desktop/ms684146(v=vs.85)).</span></span>

<span data-ttu-id="c0ebd-106">최신 마이크로 서비스 환경에서는 이러한 유형의 자동화 된 분산 트랜잭션 처리를 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-106">In the newer microservices landscape, this type of automated distributed transaction processing isn't possible.</span></span> <span data-ttu-id="c0ebd-107">관계형 데이터베이스, NoSQL 데이터 저장소 및 메시징 시스템을 비롯 한 다양 한 기술이 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-107">There are too many different technologies involved, including relational databases, NoSQL data stores, and messaging systems.</span></span> <span data-ttu-id="c0ebd-108">단일 환경에서 사용 되는 운영 체제, 프로그래밍 언어 및 프레임 워크가 혼합 되어 있을 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-108">There might also be a mix of operating systems, programming languages, and frameworks in use in a single environment.</span></span>

<span data-ttu-id="c0ebd-109">WCF 분산 트랜잭션은 [2pc (2 단계 커밋)](https://en.wikipedia.org/wiki/Two-phase_commit_protocol)로 알려진 기능을 구현한 것입니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-109">WCF distributed transaction is an implementation of what is known as a [two-phase commit (2PC)](https://en.wikipedia.org/wiki/Two-phase_commit_protocol).</span></span> <span data-ttu-id="c0ebd-110">성공 또는 실패에 따라 서비스 간에 메시지를 조정 하 고, 각 서비스 내에서 열린 트랜잭션을 만들고, 커밋 또는 롤백 메시지를 전송 하 여 2PC 트랜잭션을 수동으로 구현할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-110">You can implement 2PC transactions manually by coordinating messages across services, creating open transactions within each service, and sending commit or rollback messages, depending upon success or failure.</span></span> <span data-ttu-id="c0ebd-111">그러나 2PC 관리와 관련 된 복잡성은 시스템이 진화 함에 따라 급격 하 게 증가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-111">However, the complexity involved in managing 2PC can increase exponentially as systems evolve.</span></span> <span data-ttu-id="c0ebd-112">Open 트랜잭션은 성능에 부정적인 영향을 줄 수 있는 데이터베이스 잠금을 보유 하 고 있으며,이로 인해 서비스 간 교착 상태가 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-112">Open transactions hold database locks that can negatively affect performance, or, worse, cause cross-service deadlocks.</span></span>

<span data-ttu-id="c0ebd-113">가능 하면 분산 트랜잭션을 완전히 방지 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-113">If possible, it's best to avoid distributed transactions altogether.</span></span> <span data-ttu-id="c0ebd-114">원자성 업데이트를 요구 하기 위해 데이터의 두 항목을 연결 하는 경우 동일한 서비스를 사용 하 여 두 항목을 모두 처리 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-114">If two items of data are so linked as to require atomic updates, consider handling them both with the same service.</span></span> <span data-ttu-id="c0ebd-115">해당 서비스에 단일 요청 또는 메시지를 사용 하 여 이러한 원자성 변경을 적용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-115">Apply those atomic changes by using a single request or message to that service.</span></span>

<span data-ttu-id="c0ebd-116">가능 하지 않은 경우 [Saga 패턴](https://microservices.io/patterns/data/saga.html)을 사용 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-116">If that isn't possible, then one alternative is to use the [Saga pattern](https://microservices.io/patterns/data/saga.html).</span></span> <span data-ttu-id="c0ebd-117">Saga 업데이트는 순차적으로 처리 됩니다. 각 업데이트가 성공 하면 다음 작업이 트리거됩니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-117">In a saga, updates are processed sequentially; as each update succeeds, the next one is triggered.</span></span> <span data-ttu-id="c0ebd-118">이러한 트리거는 서비스에서 서비스로 전파 되거나 saga 코디네이터 또는 orchestrator에서 관리 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-118">These triggers can be propagated from service to service, or managed by a saga coordinator or orchestrator.</span></span> <span data-ttu-id="c0ebd-119">프로세스 중에 업데이트에 실패 한 경우 이미 업데이트를 완료 한 서비스는 특정 논리를 적용 하 여 해당 업데이트를 되돌립니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-119">If an update fails at any point during the process, the services that have already completed their updates apply specific logic to reverse them.</span></span>

<span data-ttu-id="c0ebd-120">또 다른 옵션은 [.Net 마이크로 서비스 e-서적](../microservices/microservice-ddd-cqrs-patterns/index.md)에 설명 된 대로 DDD (도메인 기반 디자인) 및 CQRS (명령/쿼리 책임 분리)를 사용 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-120">Another option is to use Domain Driven Design (DDD) and Command/Query Responsibility Segregation (CQRS), as described in the [.NET Microservices e-book](../microservices/microservice-ddd-cqrs-patterns/index.md).</span></span> <span data-ttu-id="c0ebd-121">특히 도메인 이벤트 또는 [이벤트 소싱](https://martinfowler.com/eaaDev/EventSourcing.html) 을 사용 하면 업데이트를 즉시 적용 하지 않을 경우 일관 되 게 유지 하는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c0ebd-121">In particular, using domain events or [event sourcing](https://martinfowler.com/eaaDev/EventSourcing.html) can help to ensure that updates are consistently, if not immediately, applied.</span></span>

>[!div class="step-by-step"]
>[<span data-ttu-id="c0ebd-122">이전</span><span class="sxs-lookup"><span data-stu-id="c0ebd-122">Previous</span></span>](application-performance-management.md)
